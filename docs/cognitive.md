# Моделирование заданных импульсных процессов в среде FLAME GPU #

Программа на основе входных файлов - когнитивной карты (input_map.cmj), настроек отслеживания параметров моделирования (input_group.cmj_xyz), конфигурационного файла среды выполнения моделирования (config.txt). В процессе работы генерируется програмный код модели и начальная итерация для выполнения в среде FLAME GPU. После запуска модели в среде FLAME GPU возможно сформировать отчет на основе полученных итерационных данных - текстовый файл со списком отслеживаемых вершин, и проверкой каждой на вхождение в допустимый диапазон.

### Состав проекта ###

| Файл          | Назначение                             |
|---------------|----------------------------------------|
| cognitive.cpp	| вызов модели, анализ входных параметров|
| model.cpp	    | генерация проекта модели               |
| model.h       |                                        |
| nxjson.cpp    | парсинг JSON формата                   |
| nxjson.h      |                                        |
| Makefile      | скрипт сборки                          |
| make.sh       |                                        |
| prj_templates/ | шаблоны для генерации проекта модели
| prj_templates/Makefile | |
| prj_templates/make.sh | |
| prj_templates/run.sh | |
| src/model/XMlModelFile.xml | |
| src/model/functions.c | |

### Сборка проекта ###

Сборка проекта осуществляется скриптом make.sh. Компилятор g++ 7.5.0 в операционной среде Ubuntu 18.04.
В результате сборки появляется исполняемый файл *cognitive*

### Формат конфигурационного файла config.txt ###

Содержит построчно следующие данные:

*  название проекта
*  наличие всроенной визуализации
*  путь к FLAME GPU
*  путь к папке с проектами FLAME GPU
*  число итераций

Входной файл когнитивной карты:

*test.cmj* - файл в JSON формата описания когнитивной карты и входных импульсов

Настроечный файл задержек для импульсов *impulse-lag.txt*:

Для каждой вершины по порядку значение задежки в отдельной строке

### Формат и порядок запуска генератора модели ###

Примеры и порядок запуска программы приведены в скрипте run.sh

*Генерация исходного кода модели:*
```
./cognitive --project test.cmj group.cmj_xyz
```
На данном этапе получаем генерацию кода модели в папке указанной в конфигурационном файле (путь к папке с проектами FLAME GPU). Название получившейся модели cognitiv-task.

*Генерация нулевой итерации модели:*
```
./cognitive --generate test.cmj group.cmj_xyz
```
Результат - входной xml файл для проведения моделирования, в котором заданы связи между вершинами, значения в вершинах, отслеживаемые вершины и другие настройки.

*Сборка модели в среде FLAME GPU:*
```
./cognitive --make test.cmj group.cmj_xyz
```
Запускает сгенерированный скрипт компиляции проекта модели для FLAME GPU. Результат - скомпилированный бинарный файл модели.

*Запуск модели в среде FLAME GPU:*
```
./cognitive --run test.cmj group.cmj_xyz
```
Запуск на моделирование проекта. Результат - xml файлы (1.xml, 2.xml ...) с описанием состояние на каждом шаге итерации моделирования.

*Анализ полученных итерационных данных:*
```
./cognitive --analize test.cmj group.cmj_xyz
```
Формирует итоговый отчет в текстовом виде по входным файлам с итерационными данными полученными на предыдущем шаге. Пример такого отчета привиден ниже.


### Пример отчета ###

Текст отчета:

	Отслеживаемые вершины:
	Вершина: 1669816232058, Проверяемый диапазон: [1.800000-5.000000]
		Итерации на которых значение не попадает в допустимый диапазон:
			1 
		Итерации на которых значение попадает в допустимый диапазон:
			2 3 4 5 6 

Идентификатор вершины соответствует идентификатору заданному во входном файле когнитивной карты. Число итераций задается во входном конфигурационном файле и должно соответстовать числу итераций, на основании которых сформированны входные данные.
